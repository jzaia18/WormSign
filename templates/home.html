{% extends "base.html" %}

{% block title %}Home{% endblock %}

{% block css %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/home.css') }}">
{% endblock %}

{% block body %}

<div id="wrapper">
  <h2>
    Welcome to Recipe Manager
  </h2>

  <br />

  Or click <a href="/make_category">here</a> to create a category.

  <h5>
    Search for any recipe
  </h5>

  <form method="post" action="/findrecipes">
    Search by:
    <input type="radio" name="searchType" id="name" value="name" checked/>
    <label for="name">Name</label>
    <input type="radio" name="searchType" id="ingredient" value="ingredient"/>
    <label for="ingredient">Ingredient</label>
    <input type="radio" name="searchType" id="category" value="category"/>
    <label for="category">Category</label>
    <br />
    <input type="text" style="width:400px;" name="keyword" value="" placeholder="Enter a name, ingredient, or category"></p>
    <input type="submit" name="commit" value="Search">
  </form>
  <br />
  {% if notfound %}
  <h4>
    {{ notfound }}
  </h4>
  {% else %}
    {% if keyword %}
    <h4>
      Showing results for {{ keyword }}
    </h4>
      <br />
      {% for recipe in results %}
        <tr>
          {{ recipe[1] }}
          <br />
        </tr>
      {% endfor %}
    {% endif %}
  {% endif %}

</div>

<div>

  <style>
    table {
      font-family: arial, sans-serif;
      border-collapse: collapse;
      width: 100%;
    }

    td, th {
      border: 1px solid #dddddd;
      text-align: left;
      padding: 8px;
    }

    tr:nth-child(even) {
      background-color: #dddddd;
    }
  </style>

  {% if noResults %}
    <h4>
      {{ noResults }}
    </h4>
  {% elif results %}
    <h2>Pantry for user {{uid}}</h2>
    <table style="width:100%">
      <thead>
        <tr>
          <th>Ingredient</th>
          <th>Amount</th>
          <th>Exp. Date</th>
        </tr>
      </thead>
      <tbody>
        {% for order in results %}
          <tr>
            <td>{{ order[0] }}</td>
            <td>{{ order[1] }}</td>
            <td>{{ order[2] }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
    <br />
  {% endif %}

  <form method="post" action="/showpantry">
    <h5>
      Make an addition to your pantry:
    </h5>
    <div class="block">
      <label>Ingredient Name</label>
      <input type="text" style="width:400px;" name="pantry_order" value="" placeholder="e.g. salt">
    </div>
    <div class="block">
      <label>Amount</label>
      <input type="number" name="amount" value="">
    </div>
    <div class="block">
      <label>Purchase Date</label>
      <input type="date" name="buy_date" value="2021-05-31">
    </div>
    <div class="block">
      <label>Expiration Date</label>
      <input type="date" name="exp_date" value="2021-05-31">
    </div>
    <br />
    <input type="submit" name="commit" value="Search">
  </form>

</div>

{% endblock %}
